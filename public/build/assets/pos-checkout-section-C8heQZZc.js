import{u as p,a as f,r as c,s as u,b,j as e,c as j,d as N}from"./app-Q5HnnVG1.js";import{R as w}from"./rotate-ccw-x2kEfr5e.js";import"./createLucideIcon-CHlePBdT.js";function E(){const{cartDetail:r,heldSales:l,cart:s,amountPaid:n,tax:y}=p(t=>t.pos_products),o=f();c.useEffect(()=>{const t=localStorage.getItem("heldSales");t&&o(u(JSON.parse(t)))},[]),c.useEffect(()=>{const t=s.reduce((g,x)=>g+x.price*x.qty,0),a=t*r.tax,d=t+a,m=Math.max(0,n-d);o(b({...r,subtotal:t,grandTotal:d,changeDue:m}))},[s,r.tax,n]),c.useEffect(()=>{localStorage.setItem("heldSales",JSON.stringify(l))},[l]);const h=t=>{s.length>0&&!window.confirm("Overwrite current cart with held sale?")||(o(N(t.items)),o(u(l.filter(a=>a.id!==t.id))))},i=()=>s.length===0||s.length!=0&&Number(r.grandTotal)>Number(n)?!0:(s.length!=0&&Number(r.grandTotal)==Number(n),!1);return e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-bold text-gray-700 mb-4 flex items-center gap-2 border-b pb-2",children:[s.length,e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/263/263142.png",alt:"Cart Icon",width:20,height:20}),"Checkout"]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Amount Paid"}),e.jsx("input",{type:"text",inputMode:"decimal",value:n,onChange:t=>{const a=t.target.value;(a===""||/^\d*\.?\d*$/.test(a))&&o(j(a))},onBlur:()=>{},className:"w-full p-3 border rounded text-2xl font-bold text-right focus:ring-2 focus:ring-green-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded border",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Change Due"}),e.jsxs("span",{className:"text-2xl font-black text-green-600",children:["$",r.changeDue.toFixed(2)]})]}),e.jsx("button",{onClick:()=>alert("Sale Completed!"),disabled:i(),className:`w-full py-4 rounded-xl font-black text-xl shadow-lg transition-all
    ${i()?"bg-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 active:scale-95"}`,children:"COMPLETE SALE"}),l.length>0&&e.jsxs("div",{className:"mt-8 border-t pt-4",children:[e.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:["Held Sales (",l.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-yellow-100 border border-yellow-200 rounded text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:t.time}),e.jsxs("p",{className:"text-gray-600",children:["$",t.total.toFixed(2)]})]}),e.jsx("button",{onClick:()=>h(t),className:"p-1 bg-white rounded shadow hover:text-blue-600",children:e.jsx(w,{size:14})})]},t.id))})]})]})]})}export{E as default};
