import{u as j,a as p,j as e,c as n,d,s as m}from"./app-Q5HnnVG1.js";import u from"./pos-keyboard-section-CYYIdD-W.js";import{T as b}from"./trash-2-C9cpVGXI.js";import"./createLucideIcon-CHlePBdT.js";function w(){const{cart:l,cartDetail:r,heldSales:c,amountPaid:o}=j(s=>s.pos_products),t=p(),x=()=>{if(l.length===0)return alert("Cannot hold an empty cart");const s={id:Date.now(),items:l,total:r.grandTotal,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};t(m([...c,s])),t(d([])),t(n(0))},i=(s,h)=>{t(d(l.map(a=>a.id===s?{...a,qty:Math.max(0,a.qty+h)}:a).filter(a=>a.qty>0)))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-600 text-white p-3 font-bold flex justify-between",children:[e.jsx("span",{children:"Current Sale"}),e.jsx("span",{className:"text-xs opacity-80",children:new Date().toLocaleDateString()})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-gray-500 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 text-left",children:"Item"}),e.jsx("th",{className:"py-2 text-center",children:"Qty"}),e.jsx("th",{className:"py-2 text-right",children:"Price"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:" font-medium",children:s.name}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(s.id,-1),className:"px-2 border rounded bg-white",children:"-"}),e.jsx("span",{children:s.qty}),e.jsx("button",{onClick:()=>i(s.id,1),className:"px-2 border rounded bg-white",children:"+"})]})}),e.jsxs("td",{className:"py-3 text-right font-bold",children:["$",(s.price*s.qty).toFixed(2)]})]},s.id))})]})}),e.jsx("div",{children:e.jsx(u,{value:`${o}`,onChange:s=>t(n(s))})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal"})," ",e.jsxs("span",{children:["$",r.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Tax (6%)"})," ",e.jsxs("span",{children:["$",r.tax.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-black border-t pt-2",children:[e.jsx("span",{children:"Total"})," ",e.jsxs("span",{children:["$",r.grandTotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs("button",{onClick:()=>{t(d([])),t(n(0))},className:"flex-1 flex items-center justify-center gap-2 border border-gray-300 py-2 rounded font-bold hover:bg-gray-100",children:[e.jsx(b,{size:16})," Clear"]}),e.jsx("button",{onClick:x,className:"flex-1 bg-red-500 text-white py-2 rounded font-bold hover:bg-red-600",children:"Hold Sale"})]})]})]})}export{w as default};
