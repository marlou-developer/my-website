import{j as h,r as H,K as Ne,f as Pe,p as gt,R as w,a as Ut,e as It,g as tt}from"./app-Q5HnnVG1.js";import{c as Lt}from"./index-DTaTvA4S.js";import{c as ht}from"./createLucideIcon-CHlePBdT.js";import{P as Bt}from"./plus-CsjXD7Wd.js";const qt=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$t=ht("upload",qt);const Wt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zt=ht("x",Wt),Ht={primary:{solid:"bg-blue-600 text-white hover:bg-blue-700",outlined:"border border-blue-600 text-blue-600 hover:bg-blue-50"},secondary:{solid:"bg-gray-600 text-white hover:bg-gray-700",outlined:"border border-gray-600 text-gray-600 hover:bg-gray-50"},danger:{solid:"bg-red-600 text-white hover:bg-red-700",outlined:"border border-red-600 text-red-600 hover:bg-red-50"},warning:{solid:"bg-yellow-500 text-white hover:bg-yellow-600",outlined:"border border-yellow-500 text-yellow-600 hover:bg-yellow-50"},success:{solid:"bg-green-600 text-white hover:bg-green-700",outlined:"border border-green-600 text-green-600 hover:bg-green-50"},outlined:{solid:"bg-gray-600 text-white hover:bg-gray-700",outlined:"border border-gray-600 text-gray-600 hover:bg-gray-50"}},Kt={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-5 py-3 text-lg"};function Ce({children:e,variant:s="primary",size:t="md",disabled:a=!1,onClick:n,type:l="button",className:u="",loading:d=!1,outlined:V=!1}){const D="inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outlined-none disabled:opacity-50 disabled:cursor-not-allowed",k=V?"outlined":"solid",m=Lt(D,Ht[s]?.[k],Kt[t],u);return h.jsx("button",{type:l,className:m,disabled:a||d,onClick:n,children:d?h.jsx("div",{className:"flex gap-1 py-2",children:[0,150,300,450,600].map((_,v)=>h.jsxs("span",{style:{animationDelay:`${_}ms`},className:`relative flex size-2 duration-1000 animate-bounce [animation-delay:${_}ms]`,children:[h.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),h.jsx("span",{className:"relative inline-flex size-2 rounded-full bg-white"})]},_))}):e})}const mt=H.forwardRef(({label:e,name:s,error:t,onChange:a,onBlur:n,...l},u)=>{const[d,V]=H.useState(null),[D,k]=H.useState(!1),m=H.useRef(null),_=x=>{m.current=x,typeof u=="function"?u(x):u&&(u.current=x)},v=x=>{if(x&&x.type.startsWith("image/")){const P=new FileReader;P.onloadend=()=>{V(P.result)},P.readAsDataURL(x);const E=new DataTransfer;E.items.add(x),a({target:{name:s,value:E.files}})}},T=x=>{x.stopPropagation(),V(null),a({target:{name:s,value:null}}),m.current&&(m.current.value="")};return h.jsxs("div",{className:"w-full",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e}),h.jsxs("div",{onClick:()=>m.current?.click(),onDragOver:x=>{x.preventDefault(),k(!0)},onDragLeave:()=>k(!1),onDrop:x=>{x.preventDefault(),k(!1),v(x.dataTransfer.files[0])},className:`
            relative cursor-pointer rounded-xl border-2 border-dashed transition-all
            flex flex-col items-center justify-center p-4 min-h-[160px]
            ${D?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:bg-gray-100"}
            ${t?"border-red-500 bg-red-50":""}
          `,children:[h.jsx("input",{type:"file",name:s,className:"hidden",accept:"image/*",ref:_,onChange:x=>v(x.target.files[0]),onBlur:n,...l}),d?h.jsxs("div",{className:"relative w-full h-40",children:[h.jsx("img",{src:d,alt:"Preview",className:"h-full w-full object-contain rounded-lg"}),h.jsx("button",{type:"button",onClick:T,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full",children:h.jsx(zt,{size:16})})]}):h.jsxs("div",{className:"text-center",children:[h.jsx($t,{className:`mx-auto h-10 w-10 mb-2 ${t?"text-red-400":"text-gray-400"}`}),h.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag image"})]})]}),t&&h.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.message})]})});mt.displayName="ImageUpload";const ge=H.forwardRef(({label:e,name:s,type:t="text",disabled:a=!1,required:n=!1,iconLeft:l,iconRight:u,error:d,readOnly:V=!1,className:D="",...k},m)=>h.jsxs("div",{className:"w-full",children:[h.jsxs("div",{className:"relative",children:[l&&h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:l}),h.jsx("input",{autoComplete:"off",ref:m,id:s,name:s,type:t,disabled:a,required:n,readOnly:V,step:t==="number"?"any":void 0,placeholder:" ",...k,className:`
              peer w-full rounded-md border bg-white py-2.5 px-4 text-sm text-black
              focus:outline-none focus:ring-2 focus:ring-blue-500
              ${l?"pl-10":""} ${u?"pr-10":""}
              ${d?"border-red-500 focus:ring-red-500":"border-gray-300"}
              ${D}
            `}),h.jsx("label",{htmlFor:s,className:`
              absolute left-3 top-2.5 bg-white px-1 text-gray-500 text-sm
              transition-all duration-200 ease-out
              peer-placeholder-shown:top-2.5
              peer-placeholder-shown:text-sm
              peer-placeholder-shown:text-gray-500
              peer-focus:-top-2 peer-focus:text-xs peer-focus:text-blue-600
              peer-valid:-top-2 peer-valid:text-xs peer-valid:text-gray-700
            `,children:e}),u&&h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:u})]}),d&&h.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.message??d})]}));ge.displayName="Input";function Gt({isOpen:e,onClose:s,title:t,children:a,width:n=""}){return h.jsx(Ne,{show:e,as:H.Fragment,children:h.jsxs("div",{as:"div",className:"relative z-50",onClose:s,children:[h.jsx(Ne.Child,{as:H.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),h.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:h.jsx(Ne.Child,{as:H.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95 translate-y-2",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-95 translate-y-2",children:h.jsxs("div",{className:`w-full ${n} overflow-auto max-h-[95vh] py-12 transform rounded-xl bg-white p-6 text-left align-middle shadow-xl transition-all`,children:[t&&h.jsx("div",{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:t}),h.jsx("div",{children:a}),h.jsx("button",{onClick:()=>s(!1),className:"absolute top-3 right-3 text-4xl text-red-600 hover:text-red-700 ",children:"Ã—"})]})})})]})})}const Ee=H.forwardRef(({label:e,name:s,options:t=[],error:a,iconLeft:n,iconRight:l,disabled:u=!1,required:d=!1,readOnly:V=!1,className:D="",value:k,onChange:m,..._},v)=>{const[T,x]=H.useState(""),[P,E]=H.useState(!1),p=H.useRef();H.useEffect(()=>{const N=t.find(W=>W.value===k);N?x(N.label):k||x("")},[k,t]);const q=t.filter(N=>N.label.toLowerCase().includes(T.toLowerCase())),F=N=>{x(N.label),m(N.value),E(!1)},S=N=>{x(N.target.value),E(!0),N.target.value===""&&m("")};return H.useEffect(()=>{const N=W=>{if(p.current&&!p.current.contains(W.target)){E(!1);const G=t.find(Z=>Z.value===k);x(G?G.label:"")}};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[k,t]),h.jsxs("div",{className:"w-full",ref:p,children:[h.jsxs("div",{className:"relative",children:[n&&h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 z-10",children:n}),h.jsx("input",{..._,autoComplete:"off",ref:v,id:s,name:s,disabled:u,placeholder:" ",readOnly:V,value:T,onChange:S,onFocus:()=>E(!0),className:`
              peer w-full rounded-md border bg-white py-2.5 px-4 text-sm text-black
              placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-500
              ${n?"pl-10":""} ${l?"pr-10":""}
              ${a?"border-red-500 focus:ring-red-500":"border-gray-300"}
              ${D}
            `}),h.jsx("label",{htmlFor:s,className:`
              absolute left-3 top-2.5 bg-white px-1 text-gray-500 text-sm
              transition-all duration-200 ease-out
              peer-placeholder-shown:top-2.5
              peer-placeholder-shown:text-sm
              peer-placeholder-shown:text-gray-500
              peer-focus:-top-2 peer-focus:text-xs peer-focus:text-blue-600
              peer-valid:-top-2 peer-valid:text-xs peer-valid:text-gray-700
            `,children:e}),l&&h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:l}),P&&!u&&h.jsx("ul",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-white shadow-lg",children:q.length>0?q.map((N,W)=>h.jsx("li",{className:"cursor-pointer px-4 py-2 hover:bg-blue-100 text-black text-sm",onMouseDown:G=>{G.preventDefault(),F(N)},children:N.label},W)):h.jsx("li",{className:"px-4 py-2 text-sm text-gray-500",children:"No results found"})})]}),a&&h.jsx("p",{className:"mt-1 text-xs text-red-500",children:a.message??a})]})});Ee.displayName="Select";async function Jt(e){return await Pe.post("/api/pos-products",e)}async function Xt(e){return await Pe.get("/api/pos-products")}async function Yt(e){return await Pe.get("/api/pos-product-stocks")}function Qt(){return async function(e,s){const t=await Xt();e(gt.actions.setProducts(t.data))}}function Sr(){return async function(e,s){const t=await Yt();e(gt.actions.setProducts(t.data))}}var be=e=>e.type==="checkbox",ne=e=>e instanceof Date,J=e=>e==null;const bt=e=>typeof e=="object";var I=e=>!J(e)&&!Array.isArray(e)&&bt(e)&&!ne(e),vt=e=>I(e)&&e.target?be(e.target)?e.target.checked:e.target.value:e,Zt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,xt=(e,s)=>e.has(Zt(s)),er=e=>{const s=e.constructor&&e.constructor.prototype;return I(s)&&s.hasOwnProperty("isPrototypeOf")},Me=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Me&&(e instanceof Blob||s))return e;const t=Array.isArray(e);if(!t&&!(I(e)&&er(e)))return e;const a=t?[]:Object.create(Object.getPrototypeOf(e));for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=B(e[n]));return a}var Ve=e=>/^\w*$/.test(e),M=e=>e===void 0,Ue=e=>Array.isArray(e)?e.filter(Boolean):[],Ie=e=>Ue(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!I(e))return t;const a=(Ve(s)?[s]:Ie(s)).reduce((n,l)=>J(n)?n:n[l],e);return M(a)||a===e?M(e[s])?t:e[s]:a},Y=e=>typeof e=="boolean",K=e=>typeof e=="function",R=(e,s,t)=>{let a=-1;const n=Ve(s)?[s]:Ie(s),l=n.length,u=l-1;for(;++a<l;){const d=n[a];let V=t;if(a!==u){const D=e[d];V=I(D)||Array.isArray(D)?D:isNaN(+n[a+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=V,e=e[d]}};const pe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},se={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ie={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},pt=w.createContext(null);pt.displayName="HookFormContext";const Le=()=>w.useContext(pt);var _t=(e,s,t,a=!0)=>{const n={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const u=l;return s._proxyFormState[u]!==se.all&&(s._proxyFormState[u]=!a||se.all),t&&(t[u]=!0),e[u]}});return n};const Be=typeof window<"u"?w.useLayoutEffect:w.useEffect;function tr(e){const s=Le(),{control:t=s.control,disabled:a,name:n,exact:l}=e||{},[u,d]=w.useState(t._formState),V=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Be(()=>t._subscribe({name:n,formState:V.current,exact:l,callback:D=>{!a&&d({...t._formState,...D})}}),[n,a,l]),w.useEffect(()=>{V.current.isValid&&t._setValid(!0)},[t]),w.useMemo(()=>_t(u,t,V.current,!1),[u,t])}var Q=e=>typeof e=="string",Oe=(e,s,t,a,n)=>Q(e)?(a&&s.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(l=>(a&&s.watch.add(l),y(t,l))):(a&&(s.watchAll=!0),t),Re=e=>J(e)||!bt(e);function ae(e,s,t=new WeakSet){if(Re(e)||Re(s))return Object.is(e,s);if(ne(e)&&ne(s))return e.getTime()===s.getTime();const a=Object.keys(e),n=Object.keys(s);if(a.length!==n.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const l of a){const u=e[l];if(!n.includes(l))return!1;if(l!=="ref"){const d=s[l];if(ne(u)&&ne(d)||I(u)&&I(d)||Array.isArray(u)&&Array.isArray(d)?!ae(u,d,t):!Object.is(u,d))return!1}}return!0}function rr(e){const s=Le(),{control:t=s.control,name:a,defaultValue:n,disabled:l,exact:u,compute:d}=e||{},V=w.useRef(n),D=w.useRef(d),k=w.useRef(void 0),m=w.useRef(t),_=w.useRef(a);D.current=d;const[v,T]=w.useState(()=>{const F=t._getWatch(a,V.current);return D.current?D.current(F):F}),x=w.useCallback(F=>{const S=Oe(a,t._names,F||t._formValues,!1,V.current);return D.current?D.current(S):S},[t._formValues,t._names,a]),P=w.useCallback(F=>{if(!l){const S=Oe(a,t._names,F||t._formValues,!1,V.current);if(D.current){const N=D.current(S);ae(N,k.current)||(T(N),k.current=N)}else T(S)}},[t._formValues,t._names,l,a]);Be(()=>((m.current!==t||!ae(_.current,a))&&(m.current=t,_.current=a,P()),t._subscribe({name:a,formState:{values:!0},exact:u,callback:F=>{P(F.values)}})),[t,u,a,P]),w.useEffect(()=>t._removeUnmounted());const E=m.current!==t,p=_.current,q=w.useMemo(()=>{if(l)return null;const F=!E&&!ae(p,a);return E||F?x():null},[l,E,a,p,x]);return q!==null?q:v}function sr(e){const s=Le(),{name:t,disabled:a,control:n=s.control,shouldUnregister:l,defaultValue:u,exact:d=!0}=e,V=xt(n._names.array,t),D=w.useMemo(()=>y(n._formValues,t,y(n._defaultValues,t,u)),[n,t,u]),k=rr({control:n,name:t,defaultValue:D,exact:d}),m=tr({control:n,name:t,exact:d}),_=w.useRef(e),v=w.useRef(void 0),T=w.useRef(n.register(t,{...e.rules,value:k,...Y(e.disabled)?{disabled:e.disabled}:{}}));_.current=e;const x=w.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(m.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(m.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(m.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(m.validatingFields,t)},error:{enumerable:!0,get:()=>y(m.errors,t)}}),[m,t]),P=w.useCallback(F=>T.current.onChange({target:{value:vt(F),name:t},type:pe.CHANGE}),[t]),E=w.useCallback(()=>T.current.onBlur({target:{value:y(n._formValues,t),name:t},type:pe.BLUR}),[t,n._formValues]),p=w.useCallback(F=>{const S=y(n._fields,t);S&&S._f&&F&&(S._f.ref={focus:()=>K(F.focus)&&F.focus(),select:()=>K(F.select)&&F.select(),setCustomValidity:N=>K(F.setCustomValidity)&&F.setCustomValidity(N),reportValidity:()=>K(F.reportValidity)&&F.reportValidity()})},[n._fields,t]),q=w.useMemo(()=>({name:t,value:k,...Y(a)||m.disabled?{disabled:m.disabled||a}:{},onChange:P,onBlur:E,ref:p}),[t,a,m.disabled,P,E,p,k]);return w.useEffect(()=>{const F=n._options.shouldUnregister||l,S=v.current;S&&S!==t&&!V&&n.unregister(S),n.register(t,{..._.current.rules,...Y(_.current.disabled)?{disabled:_.current.disabled}:{}});const N=(W,G)=>{const Z=y(n._fields,W);Z&&Z._f&&(Z._f.mount=G)};if(N(t,!0),F){const W=B(y(n._options.defaultValues,t,_.current.defaultValue));R(n._defaultValues,t,W),M(y(n._formValues,t))&&R(n._formValues,t,W)}return!V&&n.register(t),v.current=t,()=>{(V?F&&!n._state.action:F)?n.unregister(t):N(t,!1)}},[t,n,V,l]),w.useEffect(()=>{n._setDisabledField({disabled:a,name:t})},[a,t,n]),w.useMemo(()=>({field:q,formState:m,fieldState:x}),[q,m,x])}const rt=e=>e.render(sr(e));var ar=(e,s,t,a,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[a]:n||!0}}:{},he=e=>Array.isArray(e)?e:[e],st=()=>{let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next&&l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}};function wt(e,s){const t={};for(const a in e)if(e.hasOwnProperty(a)){const n=e[a],l=s[a];if(n&&I(n)&&l){const u=wt(n,l);I(u)&&(t[a]=u)}else e[a]&&(t[a]=l)}return t}var z=e=>I(e)&&!Object.keys(e).length,qe=e=>e.type==="file",_e=e=>{if(!Me)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Vt=e=>e.type==="select-multiple",$e=e=>e.type==="radio",ir=e=>$e(e)||be(e),je=e=>_e(e)&&e.isConnected;function lr(e,s){const t=s.slice(0,-1).length;let a=0;for(;a<t;)e=M(e)?a++:e[s[a++]];return e}function nr(e){for(const s in e)if(e.hasOwnProperty(s)&&!M(e[s]))return!1;return!0}function U(e,s){const t=Array.isArray(s)?s:Ve(s)?[s]:Ie(s),a=t.length===1?e:lr(e,t),n=t.length-1,l=t[n];return a&&delete a[l],n!==0&&(I(a)&&z(a)||Array.isArray(a)&&nr(a))&&U(e,t.slice(0,-1)),e}var or=e=>{for(const s in e)if(K(e[s]))return!0;return!1};function Ft(e){return Array.isArray(e)||I(e)&&!or(e)}function Te(e,s={}){for(const t in e){const a=e[t];Ft(a)?(s[t]=Array.isArray(a)?[]:{},Te(a,s[t])):M(a)||(s[t]=!0)}return s}function ue(e,s,t){t||(t=Te(s));for(const a in e){const n=e[a];if(Ft(n))M(s)||Re(t[a])?t[a]=Te(n,Array.isArray(n)?[]:{}):ue(n,J(s)?{}:s[a],t[a]);else{const l=s[a];t[a]=!ae(n,l)}}return t}const at={value:!1,isValid:!1},it={value:!0,isValid:!0};var kt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!M(e[0].attributes.value)?M(e[0].value)||e[0].value===""?it:{value:e[0].value,isValid:!0}:it:at}return at},St=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:a})=>M(e)?e:s?e===""?NaN:e&&+e:t&&Q(e)?new Date(e):a?a(e):e;const lt={isValid:!1,value:null};var At=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,lt):lt;function nt(e){const s=e.ref;return qe(s)?s.files:$e(s)?At(e.refs).value:Vt(s)?[...s.selectedOptions].map(({value:t})=>t):be(s)?kt(e.refs).value:St(M(s.value)?e.ref.value:s.value,e)}var ur=(e,s,t,a)=>{const n={};for(const l of e){const u=y(s,l);u&&R(n,l,u._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:a}},we=e=>e instanceof RegExp,ye=e=>M(e)?e:we(e)?e.source:I(e)?we(e.value)?e.value.source:e.value:e,ot=e=>({isOnSubmit:!e||e===se.onSubmit,isOnBlur:e===se.onBlur,isOnChange:e===se.onChange,isOnAll:e===se.all,isOnTouch:e===se.onTouched});const ut="AsyncFunction";var dr=e=>!!e&&!!e.validate&&!!(K(e.validate)&&e.validate.constructor.name===ut||I(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===ut)),cr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),dt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const me=(e,s,t,a)=>{for(const n of t||Object.keys(e)){const l=y(e,n);if(l){const{_f:u,...d}=l;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],n)&&!a)return!0;if(u.ref&&s(u.ref,u.name)&&!a)return!0;if(me(d,s))break}else if(I(d)&&me(d,s))break}}};function ct(e,s,t){const a=y(e,t);if(a||Ve(t))return{error:a,name:t};const n=t.split(".");for(;n.length;){const l=n.join("."),u=y(s,l),d=y(e,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(d&&d.type)return{name:l,error:d};if(d&&d.root&&d.root.type)return{name:`${l}.root`,error:d.root};n.pop()}return{name:t}}var fr=(e,s,t,a)=>{t(e);const{name:n,...l}=e;return z(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(u=>s[u]===(!a||se.all))},yr=(e,s,t)=>!e||!s||e===s||he(e).some(a=>a&&(t?a===s:a.startsWith(s)||s.startsWith(a))),gr=(e,s,t,a,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?a.isOnBlur:n.isOnBlur)?!e:(t?a.isOnChange:n.isOnChange)?e:!0,hr=(e,s)=>!Ue(y(e,s)).length&&U(e,s),mr=(e,s,t)=>{const a=he(y(e,t));return R(a,"root",s[t]),R(e,t,a),e};function ft(e,s,t="validate"){if(Q(e)||Array.isArray(e)&&e.every(Q)||Y(e)&&!e)return{type:t,message:Q(e)?e:"",ref:s}}var oe=e=>I(e)&&!we(e)?e:{value:e,message:""},yt=async(e,s,t,a,n,l)=>{const{ref:u,refs:d,required:V,maxLength:D,minLength:k,min:m,max:_,pattern:v,validate:T,name:x,valueAsNumber:P,mount:E}=e._f,p=y(t,x);if(!E||s.has(x))return{};const q=d?d[0]:u,F=A=>{n&&q.reportValidity&&(q.setCustomValidity(Y(A)?"":A||""),q.reportValidity())},S={},N=$e(u),W=be(u),G=N||W,Z=(P||qe(u))&&M(u.value)&&M(p)||_e(u)&&u.value===""||p===""||Array.isArray(p)&&!p.length,ee=ar.bind(null,x,a,S),ve=(A,C,L,$=ie.maxLength,re=ie.minLength)=>{const X=A?C:L;S[x]={type:A?$:re,message:X,ref:u,...ee(A?$:re,X)}};if(l?!Array.isArray(p)||!p.length:V&&(!G&&(Z||J(p))||Y(p)&&!p||W&&!kt(d).isValid||N&&!At(d).isValid)){const{value:A,message:C}=Q(V)?{value:!!V,message:V}:oe(V);if(A&&(S[x]={type:ie.required,message:C,ref:q,...ee(ie.required,C)},!a))return F(C),S}if(!Z&&(!J(m)||!J(_))){let A,C;const L=oe(_),$=oe(m);if(!J(p)&&!isNaN(p)){const re=u.valueAsNumber||p&&+p;J(L.value)||(A=re>L.value),J($.value)||(C=re<$.value)}else{const re=u.valueAsDate||new Date(p),X=fe=>new Date(new Date().toDateString()+" "+fe),de=u.type=="time",ce=u.type=="week";Q(L.value)&&p&&(A=de?X(p)>X(L.value):ce?p>L.value:re>new Date(L.value)),Q($.value)&&p&&(C=de?X(p)<X($.value):ce?p<$.value:re<new Date($.value))}if((A||C)&&(ve(!!A,L.message,$.message,ie.max,ie.min),!a))return F(S[x].message),S}if((D||k)&&!Z&&(Q(p)||l&&Array.isArray(p))){const A=oe(D),C=oe(k),L=!J(A.value)&&p.length>+A.value,$=!J(C.value)&&p.length<+C.value;if((L||$)&&(ve(L,A.message,C.message),!a))return F(S[x].message),S}if(v&&!Z&&Q(p)){const{value:A,message:C}=oe(v);if(we(A)&&!p.match(A)&&(S[x]={type:ie.pattern,message:C,ref:u,...ee(ie.pattern,C)},!a))return F(C),S}if(T){if(K(T)){const A=await T(p,t),C=ft(A,q);if(C&&(S[x]={...C,...ee(ie.validate,C.message)},!a))return F(C.message),S}else if(I(T)){let A={};for(const C in T){if(!z(A)&&!a)break;const L=ft(await T[C](p,t),q,C);L&&(A={...L,...ee(C,L.message)},F(L.message),a&&(S[x]=A))}if(!z(A)&&(S[x]={ref:q,...A},!a))return S}}return F(!0),S};const br={mode:se.onSubmit,reValidateMode:se.onChange,shouldFocusError:!0};function vr(e={}){let s={...br,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:K(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},n=I(s.defaultValues)||I(s.values)?B(s.defaultValues||s.values)||{}:{},l=s.shouldUnregister?{}:B(n),u={action:!1,mount:!1,watch:!1,keepIsValid:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},V,D=0;const k={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={...k};let _={...m};const v={array:st(),state:st()},T=s.criteriaMode===se.all,x=r=>i=>{clearTimeout(D),D=setTimeout(r,i)},P=async r=>{if(!u.keepIsValid&&!s.disabled&&(m.isValid||_.isValid||r)){let i;s.resolver?(i=z((await G()).errors),E()):i=await ee(a,!0),i!==t.isValid&&v.state.next({isValid:i})}},E=(r,i)=>{!s.disabled&&(m.isValidating||m.validatingFields||_.isValidating||_.validatingFields)&&((r||Array.from(d.mount)).forEach(o=>{o&&(i?R(t.validatingFields,o,i):U(t.validatingFields,o))}),v.state.next({validatingFields:t.validatingFields,isValidating:!z(t.validatingFields)}))},p=(r,i=[],o,g,f=!0,c=!0)=>{if(g&&o&&!s.disabled){if(u.action=!0,c&&Array.isArray(y(a,r))){const b=o(y(a,r),g.argA,g.argB);f&&R(a,r,b)}if(c&&Array.isArray(y(t.errors,r))){const b=o(y(t.errors,r),g.argA,g.argB);f&&R(t.errors,r,b),hr(t.errors,r)}if((m.touchedFields||_.touchedFields)&&c&&Array.isArray(y(t.touchedFields,r))){const b=o(y(t.touchedFields,r),g.argA,g.argB);f&&R(t.touchedFields,r,b)}(m.dirtyFields||_.dirtyFields)&&(t.dirtyFields=ue(n,l)),v.state.next({name:r,isDirty:A(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else R(l,r,i)},q=(r,i)=>{R(t.errors,r,i),v.state.next({errors:t.errors})},F=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},S=(r,i,o,g)=>{const f=y(a,r);if(f){const c=y(l,r,M(o)?y(n,r):o);M(c)||g&&g.defaultChecked||i?R(l,r,i?c:nt(f._f)):$(r,c),u.mount&&!u.action&&P()}},N=(r,i,o,g,f)=>{let c=!1,b=!1;const j={name:r};if(!s.disabled){if(!o||g){(m.isDirty||_.isDirty)&&(b=t.isDirty,t.isDirty=j.isDirty=A(),c=b!==j.isDirty);const O=ae(y(n,r),i);b=!!y(t.dirtyFields,r),O?U(t.dirtyFields,r):R(t.dirtyFields,r,!0),j.dirtyFields=t.dirtyFields,c=c||(m.dirtyFields||_.dirtyFields)&&b!==!O}if(o){const O=y(t.touchedFields,r);O||(R(t.touchedFields,r,o),j.touchedFields=t.touchedFields,c=c||(m.touchedFields||_.touchedFields)&&O!==o)}c&&f&&v.state.next(j)}return c?j:{}},W=(r,i,o,g)=>{const f=y(t.errors,r),c=(m.isValid||_.isValid)&&Y(i)&&t.isValid!==i;if(s.delayError&&o?(V=x(()=>q(r,o)),V(s.delayError)):(clearTimeout(D),V=null,o?R(t.errors,r,o):U(t.errors,r)),(o?!ae(f,o):f)||!z(g)||c){const b={...g,...c&&Y(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...b},v.state.next(b)}},G=async r=>(E(r,!0),await s.resolver(l,s.context,ur(r||d.mount,a,s.criteriaMode,s.shouldUseNativeValidation))),Z=async r=>{const{errors:i}=await G(r);if(E(r),r)for(const o of r){const g=y(i,o);g?R(t.errors,o,g):U(t.errors,o)}else t.errors=i;return i},ee=async(r,i,o={valid:!0})=>{for(const g in r){const f=r[g];if(f){const{_f:c,...b}=f;if(c){const j=d.array.has(c.name),O=f._f&&dr(f._f);O&&m.validatingFields&&E([c.name],!0);const te=await yt(f,d.disabled,l,T,s.shouldUseNativeValidation&&!i,j);if(O&&m.validatingFields&&E([c.name]),te[c.name]&&(o.valid=!1,i))break;!i&&(y(te,c.name)?j?mr(t.errors,te,c.name):R(t.errors,c.name,te[c.name]):U(t.errors,c.name))}!z(b)&&await ee(b,i,o)}}return o.valid},ve=()=>{for(const r of d.unMount){const i=y(a,r);i&&(i._f.refs?i._f.refs.every(o=>!je(o)):!je(i._f.ref))&&Fe(r)}d.unMount=new Set},A=(r,i)=>!s.disabled&&(r&&i&&R(l,r,i),!ae(We(),n)),C=(r,i,o)=>Oe(r,d,{...u.mount?l:M(i)?n:Q(r)?{[r]:i}:i},o,i),L=r=>Ue(y(u.mount?l:n,r,s.shouldUnregister?y(n,r,[]):[])),$=(r,i,o={})=>{const g=y(a,r);let f=i;if(g){const c=g._f;c&&(!c.disabled&&R(l,r,St(i,c)),f=_e(c.ref)&&J(i)?"":i,Vt(c.ref)?[...c.ref.options].forEach(b=>b.selected=f.includes(b.value)):c.refs?be(c.ref)?c.refs.forEach(b=>{(!b.defaultChecked||!b.disabled)&&(Array.isArray(f)?b.checked=!!f.find(j=>j===b.value):b.checked=f===b.value||!!f)}):c.refs.forEach(b=>b.checked=b.value===f):qe(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||v.state.next({name:r,values:B(l)})))}(o.shouldDirty||o.shouldTouch)&&N(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&fe(r)},re=(r,i,o)=>{for(const g in i){if(!i.hasOwnProperty(g))return;const f=i[g],c=r+"."+g,b=y(a,c);(d.array.has(r)||I(f)||b&&!b._f)&&!ne(f)?re(c,f,o):$(c,f,o)}},X=(r,i,o={})=>{const g=y(a,r),f=d.array.has(r),c=B(i);R(l,r,c),f?(v.array.next({name:r,values:B(l)}),(m.isDirty||m.dirtyFields||_.isDirty||_.dirtyFields)&&o.shouldDirty&&v.state.next({name:r,dirtyFields:ue(n,l),isDirty:A(r,c)})):g&&!g._f&&!J(c)?re(r,c,o):$(r,c,o),dt(r,d)&&v.state.next({...t,name:r}),v.state.next({name:u.mount?r:void 0,values:B(l)})},de=async r=>{u.mount=!0;const i=r.target;let o=i.name,g=!0;const f=y(a,o),c=O=>{g=Number.isNaN(O)||ne(O)&&isNaN(O.getTime())||ae(O,y(l,o,O))},b=ot(s.mode),j=ot(s.reValidateMode);if(f){let O,te;const xe=i.type?nt(f._f):vt(r),le=r.type===pe.BLUR||r.type===pe.FOCUS_OUT,Tt=!cr(f._f)&&!s.resolver&&!y(t.errors,o)&&!f._f.deps||gr(le,y(t.touchedFields,o),t.isSubmitted,j,b),Ae=dt(o,d,le);R(l,o,xe),le?(!i||!i.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),V&&V(0)):f._f.onChange&&f._f.onChange(r);const De=N(o,xe,le),Pt=!z(De)||Ae;if(!le&&v.state.next({name:o,type:r.type,values:B(l)}),Tt)return(m.isValid||_.isValid)&&(s.mode==="onBlur"?le&&P():le||P()),Pt&&v.state.next({name:o,...Ae?{}:De});if(!le&&Ae&&v.state.next({...t}),s.resolver){const{errors:Ze}=await G([o]);if(E([o]),c(xe),g){const Mt=ct(t.errors,a,o),et=ct(Ze,a,Mt.name||o);O=et.error,o=et.name,te=z(Ze)}}else E([o],!0),O=(await yt(f,d.disabled,l,T,s.shouldUseNativeValidation))[o],E([o]),c(xe),g&&(O?te=!1:(m.isValid||_.isValid)&&(te=await ee(a,!0)));g&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&fe(f._f.deps),W(o,te,O,De))}},ce=(r,i)=>{if(y(t.errors,i)&&r.focus)return r.focus(),1},fe=async(r,i={})=>{let o,g;const f=he(r);if(s.resolver){const c=await Z(M(r)?r:f);o=z(c),g=r?!f.some(b=>y(c,b)):o}else r?(g=(await Promise.all(f.map(async c=>{const b=y(a,c);return await ee(b&&b._f?{[c]:b}:b)}))).every(Boolean),!(!g&&!t.isValid)&&P()):g=o=await ee(a);return v.state.next({...!Q(r)||(m.isValid||_.isValid)&&o!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:o}:{},errors:t.errors}),i.shouldFocus&&!g&&me(a,ce,r?f:d.mount),g},We=(r,i)=>{let o={...u.mount?l:n};return i&&(o=wt(i.dirtyFields?t.dirtyFields:t.touchedFields,o)),M(r)?o:Q(r)?y(o,r):r.map(g=>y(o,g))},ze=(r,i)=>({invalid:!!y((i||t).errors,r),isDirty:!!y((i||t).dirtyFields,r),error:y((i||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((i||t).touchedFields,r)}),Dt=r=>{r&&he(r).forEach(i=>U(t.errors,i)),v.state.next({errors:r?t.errors:{}})},He=(r,i,o)=>{const g=(y(a,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:c,message:b,type:j,...O}=f;R(t.errors,r,{...O,...i,ref:g}),v.state.next({name:r,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&g&&g.focus&&g.focus()},Nt=(r,i)=>K(r)?v.state.subscribe({next:o=>"values"in o&&r(C(void 0,i),o)}):C(r,i,!0),Ke=r=>v.state.subscribe({next:i=>{yr(r.name,i.name,r.exact)&&fr(i,r.formState||m,Rt,r.reRenderRoot)&&r.callback({values:{...l},...t,...i,defaultValues:n})}}).unsubscribe,Ct=r=>(u.mount=!0,_={..._,...r.formState},Ke({...r,formState:{...k,...r.formState}})),Fe=(r,i={})=>{for(const o of r?he(r):d.mount)d.mount.delete(o),d.array.delete(o),i.keepValue||(U(a,o),U(l,o)),!i.keepError&&U(t.errors,o),!i.keepDirty&&U(t.dirtyFields,o),!i.keepTouched&&U(t.touchedFields,o),!i.keepIsValidating&&U(t.validatingFields,o),!s.shouldUnregister&&!i.keepDefaultValue&&U(n,o);v.state.next({values:B(l)}),v.state.next({...t,...i.keepDirty?{isDirty:A()}:{}}),!i.keepIsValid&&P()},Ge=({disabled:r,name:i})=>{(Y(r)&&u.mount||r||d.disabled.has(i))&&(r?d.disabled.add(i):d.disabled.delete(i))},ke=(r,i={})=>{let o=y(a,r);const g=Y(i.disabled)||Y(s.disabled);return R(a,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...i}}),d.mount.add(r),o?Ge({disabled:Y(i.disabled)?i.disabled:s.disabled,name:r}):S(r,!0,i.value),{...g?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:ye(i.min),max:ye(i.max),minLength:ye(i.minLength),maxLength:ye(i.maxLength),pattern:ye(i.pattern)}:{},name:r,onChange:de,onBlur:de,ref:f=>{if(f){ke(r,i),o=y(a,r);const c=M(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,b=ir(c),j=o._f.refs||[];if(b?j.find(O=>O===c):c===o._f.ref)return;R(a,r,{_f:{...o._f,...b?{refs:[...j.filter(je),c,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),S(r,!1,void 0,c)}else o=y(a,r,{}),o._f&&(o._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(xt(d.array,r)&&u.action)&&d.unMount.add(r)}}},Se=()=>s.shouldFocusError&&me(a,ce,d.mount),jt=r=>{Y(r)&&(v.state.next({disabled:r}),me(a,(i,o)=>{const g=y(a,o);g&&(i.disabled=g._f.disabled||r,Array.isArray(g._f.refs)&&g._f.refs.forEach(f=>{f.disabled=g._f.disabled||r}))},0,!1))},Je=(r,i)=>async o=>{let g;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let f=B(l);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:b}=await G();E(),t.errors=c,f=B(b)}else await ee(a);if(d.disabled.size)for(const c of d.disabled)U(f,c);if(U(t.errors,"root"),z(t.errors)){v.state.next({errors:{}});try{await r(f,o)}catch(c){g=c}}else i&&await i({...t.errors},o),Se(),setTimeout(Se);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:z(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},Et=(r,i={})=>{y(a,r)&&(M(i.defaultValue)?X(r,B(y(n,r))):(X(r,i.defaultValue),R(n,r,B(i.defaultValue))),i.keepTouched||U(t.touchedFields,r),i.keepDirty||(U(t.dirtyFields,r),t.isDirty=i.defaultValue?A(r,B(y(n,r))):A()),i.keepError||(U(t.errors,r),m.isValid&&P()),v.state.next({...t}))},Xe=(r,i={})=>{const o=r?B(r):n,g=B(o),f=z(r),c=f?n:g;if(i.keepDefaultValues||(n=o),!i.keepValues){if(i.keepDirtyValues){const b=new Set([...d.mount,...Object.keys(ue(n,l))]);for(const j of Array.from(b))y(t.dirtyFields,j)?R(c,j,y(l,j)):X(j,y(c,j))}else{if(Me&&M(r))for(const b of d.mount){const j=y(a,b);if(j&&j._f){const O=Array.isArray(j._f.refs)?j._f.refs[0]:j._f.ref;if(_e(O)){const te=O.closest("form");if(te){te.reset();break}}}}if(i.keepFieldsRef)for(const b of d.mount)X(b,y(c,b));else a={}}l=s.shouldUnregister?i.keepDefaultValues?B(n):{}:B(c),v.array.next({values:{...c}}),v.state.next({values:{...c}})}d={mount:i.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!i.keepIsValid||!!i.keepDirtyValues||!s.shouldUnregister&&!z(c),u.watch=!!s.shouldUnregister,u.keepIsValid=!!i.keepIsValid,u.action=!1,i.keepErrors||(t.errors={}),v.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:f?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ae(r,n)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:i.keepDirtyValues?i.keepDefaultValues&&l?ue(n,l):t.dirtyFields:i.keepDefaultValues&&r?ue(n,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Ye=(r,i)=>Xe(K(r)?r(l):r,{...s.resetOptions,...i}),Ot=(r,i={})=>{const o=y(a,r),g=o&&o._f;if(g){const f=g.refs?g.refs[0]:g.ref;f.focus&&setTimeout(()=>{f.focus(),i.shouldSelect&&K(f.select)&&f.select()})}},Rt=r=>{t={...t,...r}},Qe={control:{register:ke,unregister:Fe,getFieldState:ze,handleSubmit:Je,setError:He,_subscribe:Ke,_runSchema:G,_updateIsValidating:E,_focusError:Se,_getWatch:C,_getDirty:A,_setValid:P,_setFieldArray:p,_setDisabledField:Ge,_setErrors:F,_getFieldArray:L,_reset:Xe,_resetDefaultValues:()=>K(s.defaultValues)&&s.defaultValues().then(r=>{Ye(r,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ve,_disableForm:jt,_subjects:v,_proxyFormState:m,get _fields(){return a},get _formValues(){return l},get _state(){return u},set _state(r){u=r},get _defaultValues(){return n},get _names(){return d},set _names(r){d=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Ct,trigger:fe,register:ke,handleSubmit:Je,watch:Nt,setValue:X,getValues:We,reset:Ye,resetField:Et,clearErrors:Dt,unregister:Fe,setError:He,setFocus:Ot,getFieldState:ze};return{...Qe,formControl:Qe}}function xr(e={}){const s=w.useRef(void 0),t=w.useRef(void 0),[a,n]=w.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:a},e.defaultValues&&!K(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...d}=vr(e);s.current={...d,formState:a}}const l=s.current.control;return l._options=e,Be(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>n({...l._formState}),reRenderRoot:!0});return n(d=>({...d,isReady:!0})),l._formState.isReady=!0,u},[l]),w.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),w.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),w.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),w.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),w.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==a.isDirty&&l._subjects.state.next({isDirty:u})}},[l,a.isDirty]),w.useEffect(()=>{var u;e.values&&!ae(e.values,t.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),!((u=l._options.resetOptions)===null||u===void 0)&&u.keepIsValid||l._setValid(),t.current=e.values,n(d=>({...d}))):l._resetDefaultValues()},[l,e.values]),w.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),s.current.formState=_t(a,l),s.current}function pr(){const[e,s]=H.useState(!1),t=Ut(),{register:a,handleSubmit:n,reset:l,control:u,formState:{errors:d,isSubmitting:V}}=xr({defaultValues:{barcode:"",name:"",category_id:"",unit_id:"",cost_price:"",sell_price:"",image:""}}),D=async k=>{try{const m=new FormData,{image:_,...v}=k;Object.entries(v).forEach(([T,x])=>{m.append(T,x)}),_?.length&&m.append("image",_[0]),await Jt(m,{headers:{"Content-Type":"multipart/form-data"}}),await It.dispatch(Qt()),await s(!1),await l(),t(tt({type:"success",title:"Product Created Successfully!"})),console.log("Product created successfully!")}catch(m){t(tt({type:"error",title:"Product Created Unsuccessful!"})),console.error("Error creating product:",m)}};return h.jsxs(h.Fragment,{children:[h.jsx(Ce,{onClick:()=>{s(!0),l()},className:"text-white  border-white shadow-sm  hover:bg-blue-500",outlined:!0,children:h.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[h.jsx(Bt,{size:18})," Add Product"]})}),h.jsx(Gt,{width:"max-w-4xl",isOpen:e,onClose:()=>s(!1),children:h.jsxs("form",{onSubmit:n(D),className:"grid grid-cols-2 gap-4",children:[h.jsx(ge,{label:"Barcode",name:"barcode",...a("barcode",{required:"Barcode is required"}),error:d.barcode}),h.jsx(ge,{label:"Product Name",name:"name",...a("name",{required:"Name is required"}),error:d.name}),h.jsx(rt,{name:"category_id",control:u,rules:{required:"Category is required"},render:({field:k})=>h.jsx(Ee,{label:"Select Category",options:[{value:1,label:"Hello"},{value:2,label:"World"}],error:d.category_id,...k})}),h.jsx(rt,{name:"unit_id",control:u,rules:{required:"Unit is required"},render:({field:k})=>h.jsx(Ee,{label:"Select Unit",options:[{value:1,label:"Hello"},{value:2,label:"World"}],error:d.unit_id,...k})}),h.jsx(ge,{label:"Cost Price",type:"number",step:"0.01",...a("cost_price",{required:"Cost price is required"}),name:"cost_price",error:d.cost_price}),h.jsx(ge,{label:"Sell Price",type:"number",step:"0.01",...a("sell_price",{required:"Sell price is required"}),name:"sell_price",error:d.sell_price}),h.jsx("div",{className:"flex w-full",children:h.jsx(mt,{label:"Upload Image",...a("image",{required:"Image is required",validate:{lessThan5MB:k=>k[0]?.size<5e6||"Max size 5MB",acceptedFormats:k=>["image/jpeg","image/png"].includes(k[0]?.type)||"Only PNG/JPG allowed"}}),error:d.image})}),h.jsxs("div",{className:"col-span-2 flex justify-end gap-2 mt-4",children:[h.jsx(Ce,{type:"submit",variant:"danger",outlined:!0,onClick:()=>s(!1),children:"Cancel"}),h.jsx(Ce,{type:"submit",variant:"primary",loading:V,children:"Save Product"})]})]})})]})}const Ar=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"}));export{pr as P,Sr as g,Ar as p};
